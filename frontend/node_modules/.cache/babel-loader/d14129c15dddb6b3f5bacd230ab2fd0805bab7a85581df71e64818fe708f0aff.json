{"ast":null,"code":"var _jsxFileName = \"/Users/yen/Desktop/Java/projects/Movies/frontend/src/components/main/moviedetail/MovieDetail.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport PubSub from 'pubsub-js';\nimport './MovieDetail.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MovieDetail() {\n  _s();\n  const [movie, setMovie] = useState();\n  const [imgError, setImgError] = useState(false);\n  const [isDelete, setIsDelete] = useState(false);\n  const params = useParams();\n  const navigate = useNavigate();\n  useEffect(() => {\n    axios.get(`http://localhost:8088/movies/movie/${params.mid}`).then(response => {\n      setMovie(response.data);\n    });\n  }, []);\n  const handleAdd = () => {\n    const username = localStorage.getItem(\"username\");\n    if (!username) {\n      navigate(\"/signin\");\n    } else {\n      axios.post(\"http://localhost:8088/user/movies\", {\n        username: username + \" \" + movie.id\n      }).then(response => {\n        PubSub.publish(\"movie-add\", response.data);\n      });\n    }\n  };\n  const handleNew = () => {\n    navigate('/add');\n  };\n  const handleUpdate = () => {\n    navigate(`/update/${movie.id}`);\n  };\n  const handleDelete = () => {\n    setIsDelete(true);\n  };\n  const deleteProcess = () => {\n    axios.delete(`http://localhost:8088/movies/movie/${movie.id}`).then(response => {\n      navigate('/');\n    });\n  };\n  return (\n    // movie===undefined ? null :\n    movie && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"movie-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"title\",\n        children: movie.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clearfix\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"year\",\n          children: [movie.releasedYear, \" -\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"minutes\",\n          children: [movie.minutes, \"m\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rate\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"rating:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\u2B50\\uFE0F \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: movie.rate.toString().length < 2 ? movie.rate + \".0\" : movie.rate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 19\n            }, this), \"/10\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"img\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: !imgError ? process.env.PUBLIC_URL + `/images/${movie.imgUrl}` : process.env.PUBLIC_URL + \"/images/clover.png\",\n          alt: \"movie-pic\",\n          onError: () => setImgError(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detail-genres\",\n        children: movie.genres.map(genres => {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            children: genres.name\n          }, genres.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 20\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"desc\",\n        children: movie.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"pin\",\n        onClick: handleAdd,\n        children: \"Add to Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this),\n      // localStorage.getItem(\"role\")===\"admin\" ? \n      localStorage.getItem(\"role\") === \"admin\" && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"pin\",\n          onClick: handleNew,\n          children: \"New Movie\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"pin update\",\n          onClick: handleUpdate,\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"pin delete\",\n          onClick: handleDelete,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this),\n        // isDelete ? \n        isDelete && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"pin delete\",\n          onClick: deleteProcess,\n          children: \"Are you sure to delete?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)\n        // null\n        ]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n      // : null\n      ]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }, this)\n  );\n}\n_s(MovieDetail, \"/WuaK9AB+bQBGAMSHhdcUmq8tbs=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = MovieDetail;\nvar _c;\n$RefreshReg$(_c, \"MovieDetail\");","map":{"version":3,"names":["useEffect","useState","useNavigate","useParams","axios","PubSub","jsxDEV","_jsxDEV","MovieDetail","_s","movie","setMovie","imgError","setImgError","isDelete","setIsDelete","params","navigate","get","mid","then","response","data","handleAdd","username","localStorage","getItem","post","id","publish","handleNew","handleUpdate","handleDelete","deleteProcess","delete","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","releasedYear","minutes","rate","toString","length","src","process","env","PUBLIC_URL","imgUrl","alt","onError","genres","map","description","onClick","_c","$RefreshReg$"],"sources":["/Users/yen/Desktop/Java/projects/Movies/frontend/src/components/main/moviedetail/MovieDetail.js"],"sourcesContent":["import { useEffect,useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport PubSub from 'pubsub-js';\nimport './MovieDetail.css';\n\nexport default function MovieDetail(){\n  const [movie,setMovie] = useState();\n  const [imgError,setImgError] = useState(false);\n  const [isDelete,setIsDelete] = useState(false);\n  const params = useParams();\n  const navigate = useNavigate();\n\n  useEffect(()=>{\n    axios.get(`http://localhost:8088/movies/movie/${params.mid}`).then((response)=>{\n      setMovie(response.data);\n    })\n  },[])\n\n  const handleAdd = ()=>{\n    const username = localStorage.getItem(\"username\");\n    if(!username) {\n      navigate(\"/signin\");\n    }else{\n      axios.post(\"http://localhost:8088/user/movies\",{username: username+\" \"+movie.id}).then((response)=>{\n        PubSub.publish(\"movie-add\", response.data);\n      })\n    }\n  }\n  const handleNew = ()=>{\n    navigate('/add');\n  }\n  const handleUpdate = ()=>{\n    navigate(`/update/${movie.id}`);\n  }\n  const handleDelete = ()=>{\n    setIsDelete(true);\n  }\n  const deleteProcess = ()=>{\n    axios.delete(`http://localhost:8088/movies/movie/${movie.id}`).then((response)=>{\n      navigate('/');\n    }) \n  }\n\n  return (\n    // movie===undefined ? null :\n    movie &&\n    <div className=\"movie-detail\">\n      <h2 className=\"title\">{movie.name}</h2>\n      <div className=\"clearfix\">\n        <div className=\"year\">{movie.releasedYear} -</div>\n        <div className=\"minutes\">{movie.minutes}m</div>\n        <div className=\"rate\">\n          <div>rating:</div>\n          <div>⭐️ <span>\n          {\n            movie.rate.toString().length<2 ?\n            movie.rate+\".0\" :\n            movie.rate\n          }\n          </span>/10</div>\n        </div>\n      </div>\n      <div className=\"img\">\n        <img src={(!imgError)? process.env.PUBLIC_URL+`/images/${movie.imgUrl}`: process.env.PUBLIC_URL+\"/images/clover.png\"}\n             alt=\"movie-pic\"\n             onError={()=>setImgError(true)}\n         />\n      </div>\n      <div className=\"detail-genres\">\n        {\n          movie.genres.map((genres) => {\n            return <button key={genres.id}>\n              {genres.name}\n            </button>\n          })\n        }\n      </div>\n      <div className=\"desc\">{movie.description}</div>\n      <button className=\"pin\" onClick={handleAdd}>Add to Cart</button>\n      {\n        // localStorage.getItem(\"role\")===\"admin\" ? \n        localStorage.getItem(\"role\")===\"admin\" && \n        <span>\n          <button className=\"pin\" onClick={handleNew}>New Movie</button>\n          <button className=\"pin update\" onClick={handleUpdate}>Update</button>\n          <button className=\"pin delete\" onClick={handleDelete}>Delete</button>\n          {\n            // isDelete ? \n            isDelete && \n            <button className=\"pin delete\" onClick={deleteProcess}>Are you sure to delete?</button> \n            // null\n          }\n        </span> \n        // : null\n      }\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}